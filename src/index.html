<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Link Money Vanilla Js Sample App</title>
  </head>
  <body>
    <button id="link-btn-pay-by-bank">Pay by Bank</button>
    <button id="link-btn-make-payment">Pay by Card</button>
    <script type="module">
      import Link from "https://static.link.money/linkmoney-web/v1/latest/linkmoney-web.min.js";

      document.addEventListener(
        "DOMContentLoaded",
        () => {
          document
            .getElementById("link-btn-pay-by-bank")
            .addEventListener("click", async function () {
              const config = {
                sessionKey: "{SESSION_KEY}",
                redirect: "http://localhost:3000",
                environment: "sandbox",
              };

              const link = Link.LinkInstance(config);
              link.action();
            });
          document
            .getElementById("link-btn")
            .addEventListener("click", async function () {
              const paymentBody = {
                amount: {
                  value: 100,
                  currency: "USD",
                },
                source: {
                  id: "{CUSTOMER_ID}",
                  type: "CUSTOMER",
                },
                destination: {
                  type: "MERCHANT",
                  id: "{MERCHANT_ID}",
                },
                softDescriptor: "{SOFT_DESCRIPTOR}",
                clientReferenceId: "{CLIENT_REFERENCE_ID}",
              };
              await fetch("{YOUR_BACKEND_ENDPOINT}/make-payment", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify(paymentBody),
              });
            });
        },
        false
      );
    </script>
  </body>
</html>
